jQuery(function(b){var h={supports_html5_storage:!0,set_cart_creation_timestamp:function(){this.supports_html5_storage&&sessionStorage.setItem("wc_cart_created",(new Date).getTime())},set_cart_hash:function(a){this.supports_html5_storage&&(localStorage.setItem(wc_cart_fragments_params.cart_hash_key,a),sessionStorage.setItem(wc_cart_fragments_params.cart_hash_key,a))},refresh_cart:function(){b.ajax({url:wc_price_based_country_frontend_params.wc_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments"),
type:"POST",success:function(a){a&&a.fragments&&(b.each(a.fragments,function(a,d){b(a).replaceWith(d)}),h.supports_html5_storage&&(sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(a.fragments)),h.set_cart_hash(a.cart_hash),a.cart_hash&&h.set_cart_creation_timestamp()))}})},set_refresh_cart_flag:function(){"undefined"===typeof Cookies?b.cookie("wc_pbc_refresh_cart","1"):Cookies.set("wc_pbc_refresh_cart","1")},get_refresh_cart_flag:function(){return"undefined"===typeof Cookies?
b.cookie("wc_pbc_refresh_cart"):Cookies.get("wc_pbc_refresh_cart")},remove_refresh_cart_flag:function(){"undefined"===typeof Cookies?b.removeCookie("wc_pbc_refresh_cart"):Cookies.remove("wc_pbc_refresh_cart")},maybe_refresh_cart:function(){"undefined"!==typeof this.get_refresh_cart_flag()&&(this.remove_refresh_cart_flag(),this.refresh_cart())},init:function(){if("undefined"===typeof wc_cart_fragments_params)return!1;try{this.supports_html5_storage="sessionStorage"in window&&null!==window.sessionStorage,
window.sessionStorage.setItem("wcpbc","test"),window.sessionStorage.removeItem("wcpbc"),window.localStorage.setItem("wcpbc","test"),window.localStorage.removeItem("wcpbc")}catch(a){this.supports_html5_storage=!1}this.maybe_refresh_cart();b("form[class ^= wcpbc-widget]").on("submit",function(a){0<b("form.woocommerce-checkout").length||h.set_refresh_cart_flag()});b(document.body).on("updated_checkout",function(a,b){h.refresh_cart()})}};h.init();var f={xhr:!1,get_product_ids:function(){var a=[];b("span.wcpbc-price").each(function(g,
d){var c=b(d).data("product-id");if("undefined"==typeof c){var e=b(d).attr("class").match(/wcpbc-price-\d+/);0<e.length&&(c=e[0].replace("wcpbc-price-",""))}a.push(c)});b.each(b("form.variations_form").data("product_variations"),function(b,d){"undefined"!==typeof d.variation_id&&a.push(d.variation_id)});b(document.body).trigger("wc_price_based_country_get_product_ids",[a]);return a},get_areas:function(){var a={};b(".wc-price-based-country-refresh-area").each(function(g,d){var c=b(d).data("area"),
e=b(d).data("id"),f=b(d).data("options");"undefined"!==typeof c&&"undefined"!==typeof e&&"undefined"!==typeof f&&("undefined"==typeof a[c]&&(a[c]={}),a[c][e]=f)});return a},refresh_product_price:function(a){b.each(a,function(a,c){b(".wcpbc-price.wcpbc-price-"+c.id).html(b(c.price_html).html()).css("visibility","")});var g=b("form.variations_form").data("product_variations");"undefined"!==typeof g&&(b.each(g,function(d,c){var e=b(c.price_html);"undefined"!==typeof a[c.variation_id]&&(g[d].display_price=
a[c.variation_id].display_price,g[d].display_regular_price=a[c.variation_id].display_regular_price,e.hasClass("price")?e.first().html(a[c.variation_id].price_html):e.html(a[c.variation_id].price_html));e.find(".wcpbc-price").css("visibility","");g[d].price_html=e.html()}),b("form.variations_form").data("product_variations",g));b(document.body).trigger("wc_price_based_country_set_product_price",[a]);b(".wcpbc-price").css("visibility","")},refresh_areas:function(a){b.each(a,function(a,d){var c='.wc-price-based-country-refresh-area[data-id="'+
d.id+'"][data-area="'+d.area+'"]',e=b(d.content).filter(c).html();b(c).html(e)})},geolocate_customer:function(){f.xhr&&f.xhr.abort();var a={country:wc_price_based_country_frontend_params.country,ids:f.get_product_ids(),areas:f.get_areas()};f.xhr=b.ajax({url:wc_price_based_country_frontend_params.wc_ajax_url.toString().replace("%%endpoint%%","wcpbc_get_location"),data:a,type:"GET",success:function(a){f.refresh_product_price(a.products);f.refresh_areas(a.areas)}})},init:function(){"1"===wc_price_based_country_frontend_params.ajax_geolocation&&
this.geolocate_customer()}};f.init()});